<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>7 Plotting, reporting and visualizing | Essential R</title>
  <meta name="description" content="7 Plotting, reporting and visualizing | Essential R">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="7 Plotting, reporting and visualizing | Essential R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="dirmeier/essential-R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Plotting, reporting and visualizing | Essential R" />
  
  
  

<meta name="author" content="Simon Dirmeier">


<meta name="date" content="2019-03-05">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="optimization.html">
<link rel="next" href="miscellaneous.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/d3-3.5.6/d3.min.js"></script>
<link href="libs/profvis-0.3.5/profvis.css" rel="stylesheet" />
<script src="libs/profvis-0.3.5/profvis.js"></script>
<link href="libs/highlight-6.2.0/textmate.css" rel="stylesheet" />
<script src="libs/highlight-6.2.0/highlight.js"></script>
<script src="libs/profvis-binding-0.3.5/profvis.js"></script>
<script src="libs/plotly-binding-4.8.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.39.2/plotly-latest.min.js"></script>
<script src="libs/detect-resize-0.5.3/jquery.resize.js"></script>
<link href="libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet" />
<script src="libs/jquery-ui-1.11.4/jquery-ui.min.js"></script>
<script src="libs/vega-1.4.3/vega.min.js"></script>
<script src="libs/lodash-2.2.1/lodash.min.js"></script>
<script>var lodash = _.noConflict();</script>
<link href="libs/ggvis-0.4.4/css/ggvis.css" rel="stylesheet" />
<script src="libs/ggvis-0.4.4/js/ggvis.js"></script>
<script src="libs/viz-0.3/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.0/grViz.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="theme.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">essential-R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="r-package-development.html"><a href="r-package-development.html"><i class="fa fa-check"></i><b>1</b> R package development</a><ul>
<li class="chapter" data-level="1.1" data-path="r-package-development.html"><a href="r-package-development.html#creating-r-packages"><i class="fa fa-check"></i><b>1.1</b> Creating R packages</a></li>
<li class="chapter" data-level="1.2" data-path="r-package-development.html"><a href="r-package-development.html#writing-r-packages"><i class="fa fa-check"></i><b>1.2</b> Writing R packages</a></li>
<li class="chapter" data-level="1.3" data-path="r-package-development.html"><a href="r-package-development.html#debugging"><i class="fa fa-check"></i><b>1.3</b> Debugging</a></li>
<li class="chapter" data-level="1.4" data-path="r-package-development.html"><a href="r-package-development.html#testing-code"><i class="fa fa-check"></i><b>1.4</b> Testing code</a></li>
<li class="chapter" data-level="1.5" data-path="r-package-development.html"><a href="r-package-development.html#documenting-code"><i class="fa fa-check"></i><b>1.5</b> Documenting code</a></li>
<li class="chapter" data-level="1.6" data-path="r-package-development.html"><a href="r-package-development.html#checking-code"><i class="fa fa-check"></i><b>1.6</b> Checking code</a></li>
<li class="chapter" data-level="1.7" data-path="r-package-development.html"><a href="r-package-development.html#static-code-analysis"><i class="fa fa-check"></i><b>1.7</b> Static code analysis</a><ul>
<li class="chapter" data-level="1.7.1" data-path="r-package-development.html"><a href="r-package-development.html#running-examples"><i class="fa fa-check"></i><b>1.7.1</b> Running examples</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="r-package-development.html"><a href="r-package-development.html#code-coverage"><i class="fa fa-check"></i><b>1.8</b> Code coverage</a></li>
<li class="chapter" data-level="1.9" data-path="r-package-development.html"><a href="r-package-development.html#profiling-and-benchmarking"><i class="fa fa-check"></i><b>1.9</b> Profiling and benchmarking</a></li>
<li class="chapter" data-level="1.10" data-path="r-package-development.html"><a href="r-package-development.html#creating-a-landing-page"><i class="fa fa-check"></i><b>1.10</b> Creating a landing page</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="programming-paradigma-in-r.html"><a href="programming-paradigma-in-r.html"><i class="fa fa-check"></i><b>2</b> Programming paradigma in R</a><ul>
<li class="chapter" data-level="2.1" data-path="programming-paradigma-in-r.html"><a href="programming-paradigma-in-r.html#functional-programming"><i class="fa fa-check"></i><b>2.1</b> Functional programming</a></li>
<li class="chapter" data-level="2.2" data-path="programming-paradigma-in-r.html"><a href="programming-paradigma-in-r.html#object-oriented-programming"><i class="fa fa-check"></i><b>2.2</b> Object-oriented programming</a><ul>
<li class="chapter" data-level="2.2.1" data-path="programming-paradigma-in-r.html"><a href="programming-paradigma-in-r.html#s3"><i class="fa fa-check"></i><b>2.2.1</b> S3</a></li>
<li class="chapter" data-level="2.2.2" data-path="programming-paradigma-in-r.html"><a href="programming-paradigma-in-r.html#s4"><i class="fa fa-check"></i><b>2.2.2</b> S4</a></li>
<li class="chapter" data-level="2.2.3" data-path="programming-paradigma-in-r.html"><a href="programming-paradigma-in-r.html#r6"><i class="fa fa-check"></i><b>2.2.3</b> R6</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-extensions.html"><a href="r-extensions.html"><i class="fa fa-check"></i><b>3</b> R extensions</a><ul>
<li class="chapter" data-level="3.1" data-path="r-extensions.html"><a href="r-extensions.html#c-and-rcpp"><i class="fa fa-check"></i><b>3.1</b> C++ and Rcpp</a><ul>
<li class="chapter" data-level="3.1.1" data-path="r-extensions.html"><a href="r-extensions.html#rcpp-in-a-package"><i class="fa fa-check"></i><b>3.1.1</b> Rcpp in a package</a></li>
<li class="chapter" data-level="3.1.2" data-path="r-extensions.html"><a href="r-extensions.html#writing-c"><i class="fa fa-check"></i><b>3.1.2</b> Writing <code>C++</code></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="r-extensions.html"><a href="r-extensions.html#fortran"><i class="fa fa-check"></i><b>3.2</b> Fortran</a></li>
<li class="chapter" data-level="3.3" data-path="r-extensions.html"><a href="r-extensions.html#reticulate"><i class="fa fa-check"></i><b>3.3</b> Reticulate</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="working-with-data.html"><a href="working-with-data.html"><i class="fa fa-check"></i><b>4</b> Working with data</a><ul>
<li class="chapter" data-level="4.1" data-path="working-with-data.html"><a href="working-with-data.html#tidyverse"><i class="fa fa-check"></i><b>4.1</b> tidyverse</a></li>
<li class="chapter" data-level="4.2" data-path="working-with-data.html"><a href="working-with-data.html#data.table"><i class="fa fa-check"></i><b>4.2</b> data.table</a></li>
<li class="chapter" data-level="4.3" data-path="working-with-data.html"><a href="working-with-data.html#data-structures"><i class="fa fa-check"></i><b>4.3</b> Data structures</a></li>
<li class="chapter" data-level="4.4" data-path="working-with-data.html"><a href="working-with-data.html#databases"><i class="fa fa-check"></i><b>4.4</b> Databases</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html"><i class="fa fa-check"></i><b>5</b> Data analysis and statistical modeling</a><ul>
<li class="chapter" data-level="5.1" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#stan"><i class="fa fa-check"></i><b>5.1</b> Stan</a><ul>
<li class="chapter" data-level="5.1.1" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#rstanarm"><i class="fa fa-check"></i><b>5.1.1</b> Rstanarm</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#brms"><i class="fa fa-check"></i><b>5.1.2</b> brms</a></li>
<li class="chapter" data-level="5.1.3" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#bayesplot"><i class="fa fa-check"></i><b>5.1.3</b> bayesplot</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#greta"><i class="fa fa-check"></i><b>5.2</b> greta</a></li>
<li class="chapter" data-level="5.3" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#mcmc"><i class="fa fa-check"></i><b>5.3</b> MCMC</a></li>
<li class="chapter" data-level="5.4" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#mlr-and-openml"><i class="fa fa-check"></i><b>5.4</b> mlR and openML</a></li>
<li class="chapter" data-level="5.5" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#tensorflow"><i class="fa fa-check"></i><b>5.5</b> Tensorflow</a></li>
<li class="chapter" data-level="5.6" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#keras"><i class="fa fa-check"></i><b>5.6</b> Keras</a></li>
<li class="chapter" data-level="5.7" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#statistical-learning"><i class="fa fa-check"></i><b>5.7</b> Statistical learning</a></li>
<li class="chapter" data-level="5.8" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#big-data-analytics"><i class="fa fa-check"></i><b>5.8</b> Big data analytics</a></li>
<li class="chapter" data-level="5.9" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#others"><i class="fa fa-check"></i><b>5.9</b> Others</a><ul>
<li class="chapter" data-level="5.9.1" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#modelr"><i class="fa fa-check"></i><b>5.9.1</b> modelr</a></li>
<li class="chapter" data-level="5.9.2" data-path="data-analysis-and-statistical-modeling.html"><a href="data-analysis-and-statistical-modeling.html#kernlab"><i class="fa fa-check"></i><b>5.9.2</b> kernlab</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>6</b> Optimization</a><ul>
<li class="chapter" data-level="6.1" data-path="optimization.html"><a href="optimization.html#convex-optimization"><i class="fa fa-check"></i><b>6.1</b> Convex optimization</a></li>
<li class="chapter" data-level="6.2" data-path="optimization.html"><a href="optimization.html#non-linear-optimizaton"><i class="fa fa-check"></i><b>6.2</b> Non-linear optimizaton</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="plotting-reporting-and-visualizing.html"><a href="plotting-reporting-and-visualizing.html"><i class="fa fa-check"></i><b>7</b> Plotting, reporting and visualizing</a><ul>
<li class="chapter" data-level="7.1" data-path="plotting-reporting-and-visualizing.html"><a href="plotting-reporting-and-visualizing.html#layout"><i class="fa fa-check"></i><b>7.1</b> Layout</a></li>
<li class="chapter" data-level="7.2" data-path="plotting-reporting-and-visualizing.html"><a href="plotting-reporting-and-visualizing.html#publication-ready-plots"><i class="fa fa-check"></i><b>7.2</b> Publication ready plots</a></li>
<li class="chapter" data-level="7.3" data-path="plotting-reporting-and-visualizing.html"><a href="plotting-reporting-and-visualizing.html#colors"><i class="fa fa-check"></i><b>7.3</b> Colors</a></li>
<li class="chapter" data-level="7.4" data-path="plotting-reporting-and-visualizing.html"><a href="plotting-reporting-and-visualizing.html#interactive-and-animated-plots"><i class="fa fa-check"></i><b>7.4</b> Interactive and animated plots</a></li>
<li class="chapter" data-level="7.5" data-path="plotting-reporting-and-visualizing.html"><a href="plotting-reporting-and-visualizing.html#graphs"><i class="fa fa-check"></i><b>7.5</b> Graphs</a></li>
<li class="chapter" data-level="7.6" data-path="plotting-reporting-and-visualizing.html"><a href="plotting-reporting-and-visualizing.html#rmarkdown"><i class="fa fa-check"></i><b>7.6</b> RMarkdown</a></li>
<li class="chapter" data-level="7.7" data-path="plotting-reporting-and-visualizing.html"><a href="plotting-reporting-and-visualizing.html#shiny"><i class="fa fa-check"></i><b>7.7</b> Shiny</a></li>
<li class="chapter" data-level="7.8" data-path="plotting-reporting-and-visualizing.html"><a href="plotting-reporting-and-visualizing.html#others-1"><i class="fa fa-check"></i><b>7.8</b> Others</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="miscellaneous.html"><a href="miscellaneous.html"><i class="fa fa-check"></i><b>8</b> Miscellaneous</a><ul>
<li class="chapter" data-level="8.1" data-path="miscellaneous.html"><a href="miscellaneous.html#workflow-management"><i class="fa fa-check"></i><b>8.1</b> Workflow management</a></li>
<li class="chapter" data-level="8.2" data-path="miscellaneous.html"><a href="miscellaneous.html#pry-back-the-covers-of-r"><i class="fa fa-check"></i><b>8.2</b> Pry back the covers of R</a></li>
<li class="chapter" data-level="8.3" data-path="miscellaneous.html"><a href="miscellaneous.html#tidy-evaluation"><i class="fa fa-check"></i><b>8.3</b> Tidy evaluation</a></li>
<li class="chapter" data-level="8.4" data-path="miscellaneous.html"><a href="miscellaneous.html#compile"><i class="fa fa-check"></i><b>8.4</b> Compile</a></li>
<li class="chapter" data-level="8.5" data-path="miscellaneous.html"><a href="miscellaneous.html#others-2"><i class="fa fa-check"></i><b>8.5</b> Others</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="good-practices.html"><a href="good-practices.html"><i class="fa fa-check"></i><b>9</b> Good practices</a><ul>
<li class="chapter" data-level="9.1" data-path="good-practices.html"><a href="good-practices.html#continuous-integration"><i class="fa fa-check"></i><b>9.1</b> Continuous integration</a></li>
<li class="chapter" data-level="9.2" data-path="good-practices.html"><a href="good-practices.html#version-control"><i class="fa fa-check"></i><b>9.2</b> Version control</a></li>
<li class="chapter" data-level="9.3" data-path="good-practices.html"><a href="good-practices.html#docker"><i class="fa fa-check"></i><b>9.3</b> Docker</a></li>
<li class="chapter" data-level="9.4" data-path="good-practices.html"><a href="good-practices.html#code-style"><i class="fa fa-check"></i><b>9.4</b> Code style</a></li>
<li class="chapter" data-level="9.5" data-path="good-practices.html"><a href="good-practices.html#debugging-c-from-r"><i class="fa fa-check"></i><b>9.5</b> Debugging C++ from R</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Essential R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="plotting-reporting-and-visualizing" class="section level1">
<h1><span class="header-section-number">7</span> Plotting, reporting and visualizing</h1>
<p>One of the most significant reasons to use R is probably its plotting capabilities, people contributing to <code>ggplot2</code> and the community’s effort of adding package that integrate with it. Below you’ll find some packages for plotting.</p>
<div id="layout" class="section level2">
<h2><span class="header-section-number">7.1</span> Layout</h2>
<p>Use <code>hrbrthemes</code> for a nicer layout:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(hrbrthemes)
<span class="kw">library</span>(ggsci)
<span class="kw">import_roboto_condensed</span>()

g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> height, <span class="dt">y =</span> mass, <span class="dt">color =</span> color)) <span class="op">+</span><span class="st"> </span>hrbrthemes<span class="op">::</span><span class="kw">theme_ipsum_rc</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span>ggsci<span class="op">::</span><span class="kw">scale_color_rickandmorty</span>()
<span class="kw">print</span>(g)</code></pre></div>
<p><img src="essential-R_files/figure-html/unnamed-chunk-54-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Recently I started changing to simpler layouts and themes, for instance as described on <a href="http://motioninsocial.com/tufte/"> Tufte in R</a>. <code>ggthemes</code> offers some nice options to do so. For instance, if you are feeling jealous that you cannot draft some Excel plots, cause you are working with R:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggthemes)

g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> height, <span class="dt">y =</span> mass), <span class="dt">color =</span> <span class="st">&quot;green&quot;</span>) <span class="op">+</span><span class="st"> </span>ggthemes<span class="op">::</span><span class="kw">theme_excel</span>()
<span class="kw">print</span>(g)</code></pre></div>
<p><img src="essential-R_files/figure-html/blub-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="publication-ready-plots" class="section level2">
<h2><span class="header-section-number">7.2</span> Publication ready plots</h2>
<p><code>cowplot</code> and <code>ggpubr</code> are great for greating publication ready plots:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(hp, disp)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>ggthemes<span class="op">::</span><span class="kw">theme_tufte</span>()
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(hp, disp)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>ggthemes<span class="op">::</span><span class="kw">theme_gdocs</span>()

cowplot<span class="op">::</span><span class="kw">plot_grid</span>(p1, p2, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">align =</span> <span class="st">&quot;vh&quot;</span>, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Nice&quot;</span>, <span class="st">&quot;Meh&quot;</span>))</code></pre></div>
<p><img src="essential-R_files/figure-html/cow-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>If these two are still not enough, I usually go with <code>patchwork</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(patchwork)

g <span class="op">+</span><span class="st"> </span>(p1 <span class="op">+</span><span class="st"> </span>p2) <span class="op">+</span><span class="st"> </span><span class="kw">plot_layout</span>(<span class="dt">ncol =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="essential-R_files/figure-html/patch-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="colors" class="section level2">
<h2><span class="header-section-number">7.3</span> Colors</h2>
<p>I use <code>colorspace</code> and <code>colorblindr</code> in order to remove some hue and chroma. <code>viridis</code> is a wonderful set of colors for continuous, sequential data. For discrete, qualitative data I mainly use <code>ggthemr</code> and the <code>fresh</code> colors. <code>ggsci</code> also has some wonderful color palettes. <code>scales</code> lets you have a look at a color palette easily.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(colorspace)
<span class="kw">library</span>(colorblindr)
<span class="kw">library</span>(viridis)
<span class="kw">library</span>(ggthemr)
<span class="kw">library</span>(scales)
<span class="kw">library</span>(cowplot)
ggthemr<span class="op">::</span><span class="kw">ggthemr</span>(<span class="st">&quot;fresh&quot;</span>, <span class="st">&quot;scientific&quot;</span>, <span class="dt">spacing =</span> <span class="dv">2</span>, <span class="dt">type =</span> <span class="st">&quot;inner&quot;</span>)

p1 &lt;-<span class="st"> </span>colorblindr<span class="op">::</span><span class="kw">gg_color_gradient</span>() <span class="op">+</span><span class="st"> </span>colorspace<span class="op">::</span><span class="kw">scale_fill_continuous_sequential</span>(<span class="st">&quot;viridis&quot;</span>, 
    <span class="dt">c1 =</span> <span class="dv">20</span>, <span class="dt">c2 =</span> <span class="dv">70</span>, <span class="dt">l1 =</span> <span class="dv">25</span>, <span class="dt">l2 =</span> <span class="dv">100</span>)
p2 &lt;-<span class="st"> </span>colorblindr<span class="op">::</span><span class="kw">gg_color_gradient</span>() <span class="op">+</span><span class="st"> </span>colorspace<span class="op">::</span><span class="kw">scale_fill_continuous_sequential</span>(<span class="st">&quot;Blues&quot;</span>, 
    <span class="dt">c1 =</span> <span class="dv">20</span>, <span class="dt">c2 =</span> <span class="dv">70</span>, <span class="dt">l1 =</span> <span class="dv">25</span>, <span class="dt">l2 =</span> <span class="dv">100</span>)
p3 &lt;-<span class="st"> </span>colorblindr<span class="op">::</span><span class="kw">gg_color_gradient</span>() <span class="op">+</span><span class="st"> </span>colorspace<span class="op">::</span><span class="kw">scale_fill_continuous_diverging</span>(<span class="dt">c1 =</span> <span class="dv">40</span>)
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Col =</span> ggthemr<span class="op">::</span><span class="kw">swatch</span>()[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>], <span class="dt">X =</span> <span class="dv">1</span>, <span class="dt">Y =</span> <span class="kw">seq</span>(<span class="dv">10</span>))
p4 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df) <span class="op">+</span><span class="st"> </span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Y, <span class="dt">y =</span> X), <span class="dt">fill =</span> df<span class="op">$</span>Col) <span class="op">+</span><span class="st"> </span><span class="kw">theme_void</span>()

cowplot<span class="op">::</span><span class="kw">plot_grid</span>(p1, p2, p3, p4, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">align =</span> <span class="st">&quot;vh&quot;</span>)</code></pre></div>
<p><img src="essential-R_files/figure-html/unnamed-chunk-55-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Another great tool is <code>swatches</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(swatches)

omega_nebula &lt;-<span class="st"> </span><span class="kw">read_ase</span>(<span class="kw">system.file</span>(<span class="st">&quot;palettes&quot;</span>, <span class="st">&quot;omega_nebula.ase&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;swatches&quot;</span>))
<span class="kw">show_palette</span>(omega_nebula)</code></pre></div>
<p><img src="essential-R_files/figure-html/swatch-1.png" width="672" /></p>
</div>
<div id="interactive-and-animated-plots" class="section level2">
<h2><span class="header-section-number">7.4</span> Interactive and animated plots</h2>
<p>Often you want to create an interactive plot, for instance when serving on a <code>shiny</code> instance. One way to do that is using plotly:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(plotly)

q &lt;-<span class="st"> </span><span class="kw">qplot</span>(<span class="dt">data =</span> iris, <span class="dt">x =</span> Sepal.Length, <span class="dt">y =</span> Sepal.Width, <span class="dt">color =</span> Species) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span>ggthemes<span class="op">::</span><span class="kw">theme_tufte</span>()
plotly<span class="op">::</span><span class="kw">ggplotly</span>(q)</code></pre></div>
<div id="htmlwidget-a19bfc623a4b70794edb" style="width:672px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a19bfc623a4b70794edb">{"x":{"data":[{"x":[5.1,4.9,4.7,4.6,5,5.4,4.6,5,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5,5,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5,5.5,4.9,4.4,5.1,5,4.5,4.4,5,5.1,4.8,5.1,4.6,5.3,5],"y":[3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3,3,4,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3,3.4,3.5,2.3,3.2,3.5,3.8,3,3.8,3.2,3.7,3.3],"text":["Sepal.Length: 5.1<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 4.9<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 4.7<br />Sepal.Width: 3.2<br />Species: setosa","Sepal.Length: 4.6<br />Sepal.Width: 3.1<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.6<br />Species: setosa","Sepal.Length: 5.4<br />Sepal.Width: 3.9<br />Species: setosa","Sepal.Length: 4.6<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 4.4<br />Sepal.Width: 2.9<br />Species: setosa","Sepal.Length: 4.9<br />Sepal.Width: 3.1<br />Species: setosa","Sepal.Length: 5.4<br />Sepal.Width: 3.7<br />Species: setosa","Sepal.Length: 4.8<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 4.8<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 4.3<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 5.8<br />Sepal.Width: 4.0<br />Species: setosa","Sepal.Length: 5.7<br />Sepal.Width: 4.4<br />Species: setosa","Sepal.Length: 5.4<br />Sepal.Width: 3.9<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 5.7<br />Sepal.Width: 3.8<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.8<br />Species: setosa","Sepal.Length: 5.4<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.7<br />Species: setosa","Sepal.Length: 4.6<br />Sepal.Width: 3.6<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.3<br />Species: setosa","Sepal.Length: 4.8<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.2<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 5.2<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 4.7<br />Sepal.Width: 3.2<br />Species: setosa","Sepal.Length: 4.8<br />Sepal.Width: 3.1<br />Species: setosa","Sepal.Length: 5.4<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.2<br />Sepal.Width: 4.1<br />Species: setosa","Sepal.Length: 5.5<br />Sepal.Width: 4.2<br />Species: setosa","Sepal.Length: 4.9<br />Sepal.Width: 3.1<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.2<br />Species: setosa","Sepal.Length: 5.5<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 4.9<br />Sepal.Width: 3.6<br />Species: setosa","Sepal.Length: 4.4<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 4.5<br />Sepal.Width: 2.3<br />Species: setosa","Sepal.Length: 4.4<br />Sepal.Width: 3.2<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.8<br />Species: setosa","Sepal.Length: 4.8<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.8<br />Species: setosa","Sepal.Length: 4.6<br />Sepal.Width: 3.2<br />Species: setosa","Sepal.Length: 5.3<br />Sepal.Width: 3.7<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.3<br />Species: setosa"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(101,173,194,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(101,173,194,1)"}},"hoveron":"points","name":"setosa","legendgroup":"setosa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[7,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5,5.9,6,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6,5.7,5.5,5.5,5.8,6,5.4,6,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5,5.6,5.7,5.7,6.2,5.1,5.7],"y":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2,3,2.2,2.9,2.9,3.1,3,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3,2.8,3,2.9,2.6,2.4,2.4,2.7,2.7,3,3.4,3.1,2.3,3,2.5,2.6,3,2.6,2.3,2.7,3,2.9,2.9,2.5,2.8],"text":["Sepal.Length: 7.0<br />Sepal.Width: 3.2<br />Species: versicolor","Sepal.Length: 6.4<br />Sepal.Width: 3.2<br />Species: versicolor","Sepal.Length: 6.9<br />Sepal.Width: 3.1<br />Species: versicolor","Sepal.Length: 5.5<br />Sepal.Width: 2.3<br />Species: versicolor","Sepal.Length: 6.5<br />Sepal.Width: 2.8<br />Species: versicolor","Sepal.Length: 5.7<br />Sepal.Width: 2.8<br />Species: versicolor","Sepal.Length: 6.3<br />Sepal.Width: 3.3<br />Species: versicolor","Sepal.Length: 4.9<br />Sepal.Width: 2.4<br />Species: versicolor","Sepal.Length: 6.6<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 5.2<br />Sepal.Width: 2.7<br />Species: versicolor","Sepal.Length: 5.0<br />Sepal.Width: 2.0<br />Species: versicolor","Sepal.Length: 5.9<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 6.0<br />Sepal.Width: 2.2<br />Species: versicolor","Sepal.Length: 6.1<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 5.6<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 6.7<br />Sepal.Width: 3.1<br />Species: versicolor","Sepal.Length: 5.6<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: versicolor","Sepal.Length: 6.2<br />Sepal.Width: 2.2<br />Species: versicolor","Sepal.Length: 5.6<br />Sepal.Width: 2.5<br />Species: versicolor","Sepal.Length: 5.9<br />Sepal.Width: 3.2<br />Species: versicolor","Sepal.Length: 6.1<br />Sepal.Width: 2.8<br />Species: versicolor","Sepal.Length: 6.3<br />Sepal.Width: 2.5<br />Species: versicolor","Sepal.Length: 6.1<br />Sepal.Width: 2.8<br />Species: versicolor","Sepal.Length: 6.4<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 6.6<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 6.8<br />Sepal.Width: 2.8<br />Species: versicolor","Sepal.Length: 6.7<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 6.0<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 5.7<br />Sepal.Width: 2.6<br />Species: versicolor","Sepal.Length: 5.5<br />Sepal.Width: 2.4<br />Species: versicolor","Sepal.Length: 5.5<br />Sepal.Width: 2.4<br />Species: versicolor","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: versicolor","Sepal.Length: 6.0<br />Sepal.Width: 2.7<br />Species: versicolor","Sepal.Length: 5.4<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 6.0<br />Sepal.Width: 3.4<br />Species: versicolor","Sepal.Length: 6.7<br />Sepal.Width: 3.1<br />Species: versicolor","Sepal.Length: 6.3<br />Sepal.Width: 2.3<br />Species: versicolor","Sepal.Length: 5.6<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 5.5<br />Sepal.Width: 2.5<br />Species: versicolor","Sepal.Length: 5.5<br />Sepal.Width: 2.6<br />Species: versicolor","Sepal.Length: 6.1<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 5.8<br />Sepal.Width: 2.6<br />Species: versicolor","Sepal.Length: 5.0<br />Sepal.Width: 2.3<br />Species: versicolor","Sepal.Length: 5.6<br />Sepal.Width: 2.7<br />Species: versicolor","Sepal.Length: 5.7<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 5.7<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 6.2<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 5.1<br />Sepal.Width: 2.5<br />Species: versicolor","Sepal.Length: 5.7<br />Sepal.Width: 2.8<br />Species: versicolor"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(35,59,67,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(35,59,67,1)"}},"hoveron":"points","name":"versicolor","legendgroup":"versicolor","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"y":[3.3,2.7,3,2.9,3,3,2.5,2.9,2.5,3.6,3.2,2.7,3,2.5,2.8,3.2,3,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3,2.8,3,2.8,3.8,2.8,2.8,2.6,3,3.4,3.1,3,3.1,3.1,3.1,2.7,3.2,3.3,3,2.5,3,3.4,3],"text":["Sepal.Length: 6.3<br />Sepal.Width: 3.3<br />Species: virginica","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: virginica","Sepal.Length: 7.1<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.3<br />Sepal.Width: 2.9<br />Species: virginica","Sepal.Length: 6.5<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 7.6<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 4.9<br />Sepal.Width: 2.5<br />Species: virginica","Sepal.Length: 7.3<br />Sepal.Width: 2.9<br />Species: virginica","Sepal.Length: 6.7<br />Sepal.Width: 2.5<br />Species: virginica","Sepal.Length: 7.2<br />Sepal.Width: 3.6<br />Species: virginica","Sepal.Length: 6.5<br />Sepal.Width: 3.2<br />Species: virginica","Sepal.Length: 6.4<br />Sepal.Width: 2.7<br />Species: virginica","Sepal.Length: 6.8<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 5.7<br />Sepal.Width: 2.5<br />Species: virginica","Sepal.Length: 5.8<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 6.4<br />Sepal.Width: 3.2<br />Species: virginica","Sepal.Length: 6.5<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 7.7<br />Sepal.Width: 3.8<br />Species: virginica","Sepal.Length: 7.7<br />Sepal.Width: 2.6<br />Species: virginica","Sepal.Length: 6.0<br />Sepal.Width: 2.2<br />Species: virginica","Sepal.Length: 6.9<br />Sepal.Width: 3.2<br />Species: virginica","Sepal.Length: 5.6<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 7.7<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 6.3<br />Sepal.Width: 2.7<br />Species: virginica","Sepal.Length: 6.7<br />Sepal.Width: 3.3<br />Species: virginica","Sepal.Length: 7.2<br />Sepal.Width: 3.2<br />Species: virginica","Sepal.Length: 6.2<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 6.1<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.4<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 7.2<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 7.4<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 7.9<br />Sepal.Width: 3.8<br />Species: virginica","Sepal.Length: 6.4<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 6.3<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 6.1<br />Sepal.Width: 2.6<br />Species: virginica","Sepal.Length: 7.7<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.3<br />Sepal.Width: 3.4<br />Species: virginica","Sepal.Length: 6.4<br />Sepal.Width: 3.1<br />Species: virginica","Sepal.Length: 6.0<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.9<br />Sepal.Width: 3.1<br />Species: virginica","Sepal.Length: 6.7<br />Sepal.Width: 3.1<br />Species: virginica","Sepal.Length: 6.9<br />Sepal.Width: 3.1<br />Species: virginica","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: virginica","Sepal.Length: 6.8<br />Sepal.Width: 3.2<br />Species: virginica","Sepal.Length: 6.7<br />Sepal.Width: 3.3<br />Species: virginica","Sepal.Length: 6.7<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.3<br />Sepal.Width: 2.5<br />Species: virginica","Sepal.Length: 6.5<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.2<br />Sepal.Width: 3.4<br />Species: virginica","Sepal.Length: 5.9<br />Sepal.Width: 3.0<br />Species: virginica"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(232,70,70,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(232,70,70,1)"}},"hoveron":"points","name":"virginica","legendgroup":"virginica","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":24.5235920852359,"r":7.30593607305936,"b":38.4779299847793,"l":43.1050228310502},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[4.12,8.08],"tickmode":"array","ticktext":["5","6","7","8"],"tickvals":[5,6,7,8],"categoryorder":"array","categoryarray":["5","6","7","8"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"serif","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"Sepal.Length","titlefont":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1.88,4.52],"tickmode":"array","ticktext":["2.0","2.5","3.0","3.5","4.0","4.5"],"tickvals":[2,2.5,3,3.5,4,4.5],"categoryorder":"array","categoryarray":["2.0","2.5","3.0","3.5","4.0","4.5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"serif","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"Sepal.Width","titlefont":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":11.689497716895},"y":0.972933070866142},"annotations":[{"text":"Species","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"source":"A","attrs":{"5cf745a61a77":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"5cf745a61a77","visdat":{"5cf745a61a77":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<p>Recently I also stumbled upon <code>highcharter</code> and <code>ggvis</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(highcharter)

<span class="kw">hchart</span>(iris, <span class="st">&quot;scatter&quot;</span>, <span class="kw">hcaes</span>(<span class="dt">x =</span> Sepal.Length, <span class="dt">y =</span> Sepal.Width, <span class="dt">group =</span> Species)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">hc_add_theme</span>(<span class="kw">hc_theme_tufte</span>())</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggvis)
<span class="kw">data</span>(<span class="st">&quot;mtcars&quot;</span>)
mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggvis</span>(<span class="op">~</span>wt, <span class="op">~</span>mpg, <span class="st">`</span><span class="dt">:=</span><span class="st">`</span>(size, <span class="kw">input_slider</span>(<span class="dv">10</span>, <span class="dv">100</span>)), <span class="st">`</span><span class="dt">:=</span><span class="st">`</span>(opacity, 
    <span class="kw">input_slider</span>(<span class="dv">0</span>, <span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">layer_points</span>()</code></pre></div>
<div id="plot_id894329623-container" class="ggvis-output-container">
<div id="plot_id894329623" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id894329623_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id894329623" data-renderer="svg">SVG</a>
 | 
<a id="plot_id894329623_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id894329623" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id894329623_download" class="ggvis-download" data-plot-id="plot_id894329623">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id894329623_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "reactive_500933608": "number",
          "reactive_647748132": "number",
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"reactive_500933608\",\"reactive_647748132\",\"wt\",\"mpg\"\n55,0.5,2.62,21\n55,0.5,2.875,21\n55,0.5,2.32,22.8\n55,0.5,3.215,21.4\n55,0.5,3.44,18.7\n55,0.5,3.46,18.1\n55,0.5,3.57,14.3\n55,0.5,3.19,24.4\n55,0.5,3.15,22.8\n55,0.5,3.44,19.2\n55,0.5,3.44,17.8\n55,0.5,4.07,16.4\n55,0.5,3.73,17.3\n55,0.5,3.78,15.2\n55,0.5,5.25,10.4\n55,0.5,5.424,10.4\n55,0.5,5.345,14.7\n55,0.5,2.2,32.4\n55,0.5,1.615,30.4\n55,0.5,1.835,33.9\n55,0.5,2.465,21.5\n55,0.5,3.52,15.5\n55,0.5,3.435,15.2\n55,0.5,3.84,13.3\n55,0.5,3.845,19.2\n55,0.5,1.935,27.3\n55,0.5,2.14,26\n55,0.5,1.513,30.4\n55,0.5,3.17,15.8\n55,0.5,2.77,19.7\n55,0.5,3.57,15\n55,0.5,2.78,21.4"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "field": "data.reactive_500933608"
          },
          "opacity": {
            "field": "data.reactive_647748132"
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 672,
    "height": 576
  },
  "handlers": null
};
ggvis.getPlot("plot_id894329623").parseSpec(plot_id894329623_spec);
</script>
<p>With <code>gganimate</code> you can directly create GIFs from you plots:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gganimate)
<span class="kw">library</span>(gapminder)

g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(gapminder, <span class="kw">aes</span>(gdpPercap, lifeExp, <span class="dt">size =</span> pop, <span class="dt">frame =</span> year)) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>(<span class="kw">aes</span>(<span class="dt">group =</span> year), <span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>continent, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span><span class="st"> </span>ggthemes<span class="op">::</span><span class="kw">theme_tufte</span>()
<span class="kw">gganimate</span>(g)</code></pre></div>
<div class="figure">
<img src="https://rawgit.com/dirmeier/essential-R/master/fig/gganimate.gif" />

</div>
</div>
<div id="graphs" class="section level2">
<h2><span class="header-section-number">7.5</span> Graphs</h2>
<p>There are many wonderful graph and network libraries around for plotting. For HTML <code>DiagrammeR</code> produces beautiful graphs:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(DiagrammeR)

<span class="kw">create_graph</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">add_node</span>(<span class="dt">label =</span> <span class="kw">expression</span>(Z), <span class="dt">node_aes =</span> <span class="kw">node_aes</span>(<span class="dt">penwidth =</span> <span class="dv">2</span>, 
    <span class="dt">fontname =</span> <span class="st">&quot;Arial Narrow&quot;</span>, <span class="dt">fontcolor =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">fillcolor =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">add_node</span>(<span class="dt">label =</span> <span class="st">&quot;X&quot;</span>, <span class="dt">node_aes =</span> <span class="kw">node_aes</span>(<span class="dt">penwidth =</span> <span class="dv">2</span>, <span class="dt">fontname =</span> <span class="st">&quot;Arial Narrow&quot;</span>, 
        <span class="dt">fontcolor =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">fillcolor =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">add_edge</span>(<span class="dt">from =</span> <span class="dv">1</span>, 
    <span class="dt">to =</span> <span class="dv">2</span>, <span class="dt">edge_aes =</span> <span class="kw">edge_aes</span>(<span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">render_graph</span>(<span class="dt">layout =</span> <span class="st">&quot;tree&quot;</span>)</code></pre></div>
<div id="htmlwidget-0dd678ebdba715fd86b8" style="width:672px;height:192px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-0dd678ebdba715fd86b8">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Z\", penwidth = \"2\", color = \"black\", fontname = \"Arial Narrow\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"0,2!\"] \n  \"2\" [label = \"X\", penwidth = \"2\", color = \"black\", fontname = \"Arial Narrow\", fontcolor = \"black\", fillcolor = \"#C0C0C0\", pos = \"0,1!\"] \n\"1\"->\"2\" [color = \"black\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p>For PDFs I primarily use <code>igraph</code> (which you can also use for graph algorithms).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(igraph)

<span class="kw">set.seed</span>(<span class="dv">1</span>)
g &lt;-<span class="st"> </span>igraph<span class="op">::</span><span class="kw">random.graph.game</span>(<span class="dv">5</span>, <span class="dt">p.or.m =</span> <span class="fl">0.4</span>)
l &lt;-<span class="st"> </span>igraph<span class="op">::</span><span class="kw">layout.reingold.tilford</span>(g)
l[<span class="dv">1</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)
l[<span class="dv">2</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)
l[<span class="dv">3</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">0</span>)
l[<span class="dv">4</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">0</span>)
<span class="co"># l[5, 1:2] &lt;- c(2, 2)</span>
<span class="kw">plot</span>(g, <span class="dt">vertex.size =</span> <span class="dv">9</span>, <span class="dt">vertex.color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">vertex.label.degree =</span> <span class="dv">0</span>, <span class="dt">vertex.label.cex =</span> <span class="dv">1</span>, 
    <span class="dt">vertex.label.dist =</span> <span class="dv">1</span>, <span class="dt">vertex.label.color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">edge.color =</span> <span class="st">&quot;darkgrey&quot;</span>, 
    <span class="dt">edge.width =</span> <span class="fl">0.5</span>, <span class="dt">edge.arrow.size =</span> <span class="fl">0.65</span>, <span class="dt">layout =</span> l)</code></pre></div>
<p><img src="essential-R_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
<p>Other packages for graphi visualisations include <code>ggnetwork</code>/<code>ggnet</code>, <code>tidygraph</code>, or <code>ggraph</code>.</p>
</div>
<div id="rmarkdown" class="section level2">
<h2><span class="header-section-number">7.6</span> RMarkdown</h2>
<p><code>Rmarkdown</code> is a great way for documentation, reporting and working reproducibly. Rstudio provides tons of different output formats like web sites (like this one), Tufte style documents, blogs and others. For presentations that use R code I use either <a href="https://github.com/yihui/xaringan">xaringan</a>, <a href="http://slidify.org/">Slidify</a> or <a href="https://rmarkdown.rstudio.com/revealjs_presentation_format.html">reveal.js</a>. Find all the output formats by Rstudio <a href="https://rmarkdown.rstudio.com/lesson-9.html">here</a>.</p>
</div>
<div id="shiny" class="section level2">
<h2><span class="header-section-number">7.7</span> Shiny</h2>
<p>If you want to present your work interactively you can do so by building a web page using <code>shiny</code>. Setting up a Shiny instance for reporting is a great way to present data using interactive plots. Setting up shiny is fairly easy. You need to create a <code>server.R</code> file and <code>ui.R</code> file, e.g. like this:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">cat</span> R/ui.R</code></pre></div>
<pre><code>library(shiny)
library(shinyjs)
library(plotly)

shinyUI(
    fluidPage(
        useShinyjs(),
        fluidRow(
            column(
                width = 6,offset=2,
                h3(&quot;Scatterplot&quot;),
                HTML(&quot;&lt;h5&gt;&lt;i&gt;Created using ggplot2, hrbrthemes and ggsci on the iris data.&lt;/i&gt;&lt;/h5&gt;&quot;),
                plotOutput(&quot;scatterplot&quot;, width=800)
            )
        )

    )
)</code></pre>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">cat</span> R/server.R</code></pre></div>
<pre><code>library(shiny)
library(shinyjs)
library(ggplot2)
library(ggsci)
library(hrbrthemes)

shinyServer(function(input, output)
{

    output$scatterplot &lt;- renderPlot({
        ggplot(iris, aes(x=Sepal.Width, y=Sepal.Length, colour=Species)) +
            geom_point(aes(colour=Species)) +
            geom_smooth(alpha=.1) +
            hrbrthemes::theme_ipsum_rc() +
            ggsci::scale_colour_rickandmorty() +
            labs(title=&quot;Iris scatter plot&quot;,
                 subtitle=&quot;Visualizing sepal width vs. sepal length for several species in a schwifty theme.&quot;)
  })
})</code></pre>
<p>You can publish your server on <a href="http://www.shinyapps.io/">shinyapps.io</a> so that it is accessible by everyone.</p>
</div>
<div id="others-1" class="section level2">
<h2><span class="header-section-number">7.8</span> Others</h2>
<p>TODO add some other packages</p>
<ul>
<li><code>ggraph</code>, <code>ggnet</code> and <code>ggnetwork</code></li>
<li><code>gganimate</code></li>
<li><code>tweenr</code></li>
<li><code>ggpixel</code></li>
<li><code>animation</code></li>
<li><code>lattice</code></li>
<li><code>magick</code></li>
<li><code>imager</code></li>
</ul>
<p>TODO add</p>
<ul>
<li>add beautified base plots (tufte or so)</li>
<li>add colorschemes</li>
<li>magick and imagr</li>
<li>scico</li>
<li>tidygraph</li>
<li>r2d3</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="optimization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="miscellaneous.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

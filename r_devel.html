<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="site_libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/htmlwidgets-0.9/htmlwidgets.js"></script>
<script src="site_libs/d3-3.5.6/d3.min.js"></script>
<link href="site_libs/profvis-0.3.4/profvis.css" rel="stylesheet" />
<script src="site_libs/profvis-0.3.4/profvis.js"></script>
<link href="site_libs/highlight-6.2.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlight-6.2.0/highlight.js"></script>
<script src="site_libs/profvis-binding-0.3.4/profvis.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="theme.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 41px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 46px;
  margin-top: -46px;
}

.section h2 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h3 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h4 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h5 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h6 {
  padding-top: 46px;
  margin-top: -46px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Essential R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dirmeier/essential-R">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://twitter.com/simon_dirmeier/">
    <span class="fa fa fa fa-twitter-square fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<div id="r-development" class="section level1">
<h1><span class="header-section-number">1</span> R development</h1>
<p>The following section covers tools that help and speed up developing R:</p>
<ul>
<li><code>yeoman</code></li>
<li><code>devtools</code></li>
<li><code>testthat</code></li>
<li><code>roxygen2</code></li>
<li><code>covr</code></li>
<li><code>lintr</code></li>
<li><code>usethis</code></li>
</ul>
<div id="creating-r-packages" class="section level2">
<h2><span class="header-section-number">1.1</span> Creating R packages</h2>
<p>If you have <code>yeoman</code> installed, you can use the <code>R-bones</code> generator in order to initialize a complete project. This gives you the following barebone:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">  <span class="kw">yo</span> r-bones
  <span class="kw">ls</span> -la newpkg</code></pre></div>
<pre><code>## total 1624
## drwxr-xr-x  26 simondi  1029     884 Jan 24 22:31 .
## drwxr-xr-x  32 simondi  1029    1088 Jan 25 23:53 ..
## -rw-r--r--   1 simondi  1029     220 Jan 22 20:24 .Rbuildignore
## drwxr-xr-x   4 simondi  1029     136 Jan 23 20:32 .Rproj.user
## -rw-r--r--   1 simondi  1029     410 Jan 22 20:24 .codecov.yml
## -rw-r--r--   1 simondi  1029      51 Jan 22 20:24 .gitattributes
## -rw-r--r--   1 simondi  1029     421 Jan 22 20:24 .gitignore
## -rw-r--r--   1 simondi  1029     556 Jan 22 20:24 .lintr
## -rw-r--r--   1 simondi  1029     829 Jan 23 15:44 .travis.yml
## -rw-r--r--   1 simondi  1029     176 Jan 22 20:24 .yo-rc.json
## -rw-r--r--   1 simondi  1029     548 Jan 23 20:31 DESCRIPTION
## -rw-r--r--   1 simondi  1029   35141 Jan 22 20:24 LICENSE
## -rw-r--r--   1 simondi  1029      56 Jan 23 20:47 NAMESPACE
## drwxr-xr-x   4 simondi  1029     136 Jan 23 20:45 R
## -rw-r--r--   1 simondi  1029     556 Jan 24 22:31 README.md
## -rw-r--r--   1 simondi  1029      93 Jan 22 20:24 TODO.md
## -rw-r--r--   1 simondi  1029     136 Jan 22 20:24 VERSIONS.md
## -rw-r--r--   1 simondi  1029     836 Jan 22 20:24 appveyor.yml
## drwxr-xr-x  11 simondi  1029     374 Jan 24 22:31 docs
## drwxr-xr-x   3 simondi  1029     102 Jan 22 20:24 inst
## drwxr-xr-x   3 simondi  1029     102 Jan 23 15:44 man
## -rw-r--r--   1 simondi  1029     354 Jan 24 11:28 newpkg.Rproj
## -rw-r--r--   1 simondi  1029  736082 Jan 23 20:42 newpkg.html
## drwxr-xr-x   2 simondi  1029      68 Jan 23 20:47 src
## drwxr-xr-x   4 simondi  1029     136 Jan 22 20:24 tests
## drwxr-xr-x   3 simondi  1029     102 Jan 22 20:24 vignettes</code></pre>
</div>
<div id="writing-r-packages" class="section level2">
<h2><span class="header-section-number">1.2</span> Writing R packages</h2>
<p>When creating an R package <code>devtools</code> and <code>covr</code> cover almost any functionality required. The following functions delineate how my typical workflow looks:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  devtools::<span class="kw">create</span>(<span class="st">&quot;newpkg&quot;</span>)
  devtools::<span class="kw">use_rcpp</span>()  
  devtools::<span class="kw">document</span>()  
  devtools::<span class="kw">test</span>()
  devtools::<span class="kw">check_cran</span>()
  devtools::<span class="kw">lint</span>()
  devtools::<span class="kw">run_examples</span>()
  covr::<span class="kw">package_coverage</span>()
  devtools::<span class="kw">install</span>()</code></pre></div>
<p>This basically covers your complete development life cycle. devtools is tremendously useful. If you look for something that helps you write a package, devtools usually has a function for it. For all other things, use usethis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  usethis::<span class="kw">use_namespace</span>()
  usethis::<span class="kw">use_code_of_conduct</span>()
  usethis::<span class="kw">use_travis</span>()
  usethis::<span class="kw">use_vignette</span>()
  usethis::<span class="kw">use_gpl3_license</span>()</code></pre></div>
</div>
<div id="testing-code" class="section level2">
<h2><span class="header-section-number">1.3</span> Testing code</h2>
<p>Right after creating your package, you should write your first test (yes, really). Testing is essential*for writing good software. The same way as programming languages change your way of thinking, unit tests change your way of writing functions. testthat is probably the best way to go here. Tests are usually put in <code>tests/testthat</code>. You can use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  devtools::<span class="kw">use_testthat</span>()</code></pre></div>
<p>to create a test suite automatically. A test would look like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  testthat::<span class="kw">test_that</span>(<span class="st">&quot;i know my math&quot;</span>, {
    testthat::<span class="kw">expect_equal</span>(<span class="kw">g</span>(), <span class="dv">2</span>)
  })

  testthat::<span class="kw">test_that</span>(<span class="st">&quot;i know my math&quot;</span>, {
      testthat::<span class="kw">expect_false</span>(<span class="st">&quot;wrong&quot;</span> ==<span class="st"> &quot;right&quot;</span>)
  })</code></pre></div>
<p>Let’s test this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  devtools::<span class="kw">test</span>(<span class="st">&quot;./newpkg&quot;</span>)</code></pre></div>
<pre><code>## Loading newpkg</code></pre>
<pre><code>## Testing newpkg</code></pre>
<pre><code>## ✔ | OK F W S | Context
## 
⠏ |  0       | hello
⠋ |  1       | hello
⠙ |  2       | hello
✔ |  2       | hello
## 
## ══ Results ════════════════════════════════════════════════════════════════
## OK:       2
## Failed:   0
## Warnings: 0
## Skipped:  0</code></pre>
<p>A function ideally does <em>one task and one task only</em>. Functions with side effects, multiple operations or exceedingly large method body easily introduce bugs. Keep your functions concise! This also simplifies testing, because it is easier to track down a bug in a shorter function.</p>
</div>
<div id="documenting-code" class="section level2">
<h2><span class="header-section-number">1.4</span> Documenting code</h2>
<p>Having written the first unit test, we can create the actual function and its respective documentation using <code>roxygen2</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co">#&#39; @title Adds 1 and 1</span>
  <span class="co">#&#39;</span>
  <span class="co">#&#39; @description This magnificent function computes the sum of 1 and 1.</span>
  <span class="co">#&#39;</span>
  <span class="co">#&#39; @export  </span>
  <span class="co">#&#39;</span>
  <span class="co">#&#39; @return  returns 2</span>
  <span class="co">#&#39;  </span>
  <span class="co">#&#39; @examples</span>
  <span class="co">#&#39;   a &lt;- g()</span>
  <span class="co">#&#39;   print(a)</span>
  g &lt;-<span class="st"> </span>function() <span class="dv">1</span> +<span class="st"> </span><span class="dv">1</span></code></pre></div>
<p>Then build the documentation:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  devtools::<span class="kw">document</span>(<span class="st">&quot;./newpkg&quot;</span>)</code></pre></div>
<pre><code>## Updating newpkg documentation</code></pre>
<pre><code>## Loading newpkg</code></pre>
<p>An excellent help for creating documentation (of S3 and S4) is for instance <a href="https://github.com/variani/pckdev">pckdev</a> or the official <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">vignette</a>.</p>
</div>
<div id="checking-code" class="section level2">
<h2><span class="header-section-number">1.5</span> Checking code</h2>
<p>If you want to submit your package to CRAN or Bioconductor certain criteria must be fulfilled. Some of which can be tested by checking or package like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  devtools::<span class="kw">check_cran</span>(<span class="st">&quot;./newpkg&quot;</span>)</code></pre></div>
<pre><code>## Checking 1 CRAN packages =================================================</code></pre>
<pre><code>## Results saved in /var/folders/cx/v45t2v2n6b548_vfn76vnzlw0050sr/T//Rtmp4952Pm/check_cran170614aabd535</code></pre>
<pre><code>## Package library: /private/var/folders/cx/v45t2v2n6b548_vfn76vnzlw0050sr/T/Rtmp4952Pm/R-lib, /Library/Frameworks/R.framework/Versions/3.4/Resources/library</code></pre>
<pre><code>## Installing dependencies --------------------------------------------------</code></pre>
<pre><code>## Installing 1 packages: ./newpkg</code></pre>
<pre><code>## Skipping 1 packages without source:./newpkg</code></pre>
<pre><code>## Checking packages --------------------------------------------------------</code></pre>
<pre><code>## Checking 0 packages:</code></pre>
<pre><code>## Package library: /private/var/folders/cx/v45t2v2n6b548_vfn76vnzlw0050sr/T/Rtmp4952Pm/R-lib, /Library/Frameworks/R.framework/Versions/3.4/Resources/library</code></pre>
<pre><code>## NULL</code></pre>
<p>This does not test for Bioconductor though. For this you have to install <a href="https://bioconductor.org/packages/release/bioc/html/BiocCheck.html"> BioCheck</a> manually and call <code>R CMD BiocCheck newpkg*.tar</code> on the command line.</p>
</div>
<div id="static-code-analysis" class="section level2">
<h2><span class="header-section-number">1.6</span> Static code analysis</h2>
<p>lintr checks your code for style, syntax error and possible issues. You can also incorporate lintr in your unit tests and let them fail, if lints are discovered.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if (<span class="kw">requireNamespace</span>(<span class="st">&quot;lintr&quot;</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)) {
  <span class="kw">test_that</span>(<span class="st">&quot;this is lint free&quot;</span>, {  
    lintr::<span class="kw">expect_lint_free</span>()
  })
}</code></pre></div>
<p>What lintr considers worth reporting can be customized in a .lintr file in your package root directory.</p>
<p>Let’s see if our small package is lint free:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  devtools::<span class="kw">lint</span>(<span class="st">&quot;./newpkg&quot;</span>)</code></pre></div>
<pre><code>## Linting newpkg....</code></pre>
<pre><code>## R/bad_bad_file.R:3:1: style: lines should not be more than 80 characters.
##                                                                               myRet = a+b
## ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## R/bad_bad_file.R:3:79: style: Variable and function names should be all lowercase.
##                                                                               myRet = a+b
##                                                                               ^~~~~
## R/bad_bad_file.R:3:85: style: Use &lt;-, not =, for assignment.
##                                                                               myRet = a+b
##                                                                                     ^</code></pre>
<p>Whoops!</p>
</div>
<div id="running-examples" class="section level2">
<h2><span class="header-section-number">1.7</span> Running examples</h2>
<p>Examples are extremely helpful both for the user and debugging purposes. When we documented our function <code>g</code> we already have an example how to use the function. We can manually call all examples using:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  devtools::<span class="kw">run_examples</span>(<span class="st">&quot;./newpkg&quot;</span>)</code></pre></div>
<pre><code>## Updating newpkg documentation</code></pre>
<pre><code>## Loading newpkg</code></pre>
<pre><code>## Running 1 example files in newpkg ----------------------------------------</code></pre>
<pre><code>## Loading newpkg</code></pre>
<pre><code>## Running examples in g.Rd -------------------------------------------------</code></pre>
<pre><code>## &gt; 
## &gt;   a &lt;- g()
## &gt;   print(a)
## [1] 2</code></pre>
<pre><code>## Loading newpkg</code></pre>
</div>
<div id="code-coverage" class="section level2">
<h2><span class="header-section-number">1.8</span> Code coverage</h2>
<p>covr lets you check how much of your code is used and tested. If you created a package just run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  covr::<span class="kw">package_coverage</span>(<span class="st">&quot;./newpkg&quot;</span>)</code></pre></div>
<pre><code>## newpkg Coverage: 50.00%</code></pre>
<pre><code>## R/bad_bad_file.R: 0.00%</code></pre>
<pre><code>## R/newpkg.R: 100.00%</code></pre>
<p>Having high code coverage usually correlates with a good testing suite. The more functionality is tested, the larger the code coverage. You can customized reports by adding a file called <code>.codecov.yml</code> to your project’s root:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">  <span class="kw">cat</span> ./newpkg/.codecov.yml</code></pre></div>
<pre><code>## comment:
##   behavior: default
##   layout: header, diff
##   require_changes: false
## 
## coverage:
##   precision: 2
##   range:
##   - 70.0
##   - 100.0
##   round: down
##   status:
##     changes: false
##     patch: true
##     project: true
## 
## parsers:
##   gcov:
##     branch_detection:
##       conditional: true
##       loop: true
##       macro: false
##       method: false
##   javascript:
##     enable_partials: false
## 
## ignore:
##   - &quot;inst/include/&quot;
##   - &quot;inst/&quot;</code></pre>
</div>
<div id="profiling-and-benchmarking" class="section level2">
<h2><span class="header-section-number">1.9</span> Profiling and benchmarking</h2>
<p>If you think your code runs slowly, you can try to find the bottleneck, for instance, using <code>profvis</code> and <code>microbenchmark</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">library</span>(<span class="st">&#39;profvis&#39;</span>)
  <span class="kw">library</span>(<span class="st">&#39;ggthemes&#39;</span>)
  <span class="kw">library</span>(<span class="st">&#39;gam&#39;</span>)
  <span class="kw">data</span>(kyphosis)
  profvis::<span class="kw">profvis</span>({
    sp &lt;-<span class="st"> </span>stats::<span class="kw">spline</span>(kyphosis$Age, kyphosis$Number, <span class="dt">method=</span><span class="st">&quot;n&quot;</span>)
    gm &lt;-<span class="st"> </span>gam::<span class="kw">gam</span>(Number ~<span class="st"> </span>Age, <span class="dt">family=</span>poisson, <span class="dt">data=</span>kyphosis)

    df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
      <span class="dt">X =</span> <span class="kw">c</span>(sp$x, kyphosis$Age),
      <span class="dt">Y =</span> <span class="kw">c</span>(sp$y, <span class="kw">predict</span>(gm, kyphosis)),
      <span class="dt">model =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;Spline&quot;</span>, <span class="kw">length</span>(sp$x)),
                <span class="kw">rep</span>(<span class="st">&quot;GAM&quot;</span>,    <span class="kw">length</span>(kyphosis$Age))))

    g &lt;-<span class="st"> </span>ggplot2::<span class="kw">ggplot</span>(df) +
<span class="st">      </span>ggplot2::<span class="kw">geom_point</span>(ggplot2::<span class="kw">aes</span>(<span class="dt">x=</span>X, <span class="dt">y=</span>Y, <span class="dt">color=</span>model)) +
<span class="st">      </span>ggthemes::<span class="kw">theme_tufte</span>()

    <span class="kw">print</span>(g)
  })</code></pre></div>
<p><img src="r_devel_files/figure-html/unnamed-chunk-16-1.png" width="384" /><div id="htmlwidget-5c9c5b24655f5b971fe3" style="width:100%;height:600px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-5c9c5b24655f5b971fe3">{"x":{"message":{"prof":{"time":[1,1,1,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,16,16,16,16,16,16,16,16,16,16,16,17,17,17,17,17,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],"depth":[3,2,1,11,10,9,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,6,5,4,3,2,1,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,13,12,11,10,9,8,7,6,5,4,3,2,1,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,11,10,9,8,7,6,5,4,3,2,1,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,12,11,10,9,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1,11,10,9,8,7,6,5,4,3,2,1,5,4,3,2,1,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1],"label":["grid.newpage","print.ggplot","print","FUN","FUN","vapply","check_aesthetics","f","l$compute_aesthetics","f","by_layer","ggplot_build","print.ggplot","print","$","lapply","f","layout$reset_scales","ggplot_build","print.ggplot","print","-",".coverage","labeling::extended","<Anonymous>","f","self$get_breaks","f","<Anonymous>","f","scale_details$break_info","train_cartesian","f","coord$train","<Anonymous>","mapply","Map","f","layout$train_ranges","ggplot_build","print.ggplot","print","$","f","layout$render","ggplot_gtable","print.ggplot","print","numnotnull","validGP","gpar","element_grob.element_text","element_grob","element_render","FUN","lapply","FUN","lapply","f","self$render_labels","f","layout$render","ggplot_gtable","print.ggplot","print","guide_axis","render_axis","f","coord$render_axis_h","f","self$draw_panels","f","<Anonymous>","f","layout$render","ggplot_gtable","print.ggplot","print","stopifnot","gtable_add_cols","gtable_row","guide_axis","render_axis","f","coord$render_axis_v","f","self$draw_panels","f","<Anonymous>","f","layout$render","ggplot_gtable","print.ggplot","print","%in%",".deparseOpts","deparse","paste","force","as.data.frame.integer","as.data.frame","data.frame","find_panel","f","self$draw_labels","f","<Anonymous>","f","layout$render","ggplot_gtable","print.ggplot","print","rbind","gtable_add_grob","f","self$draw_labels","f","<Anonymous>","f","layout$render","ggplot_gtable","print.ggplot","print","grid.Call","descentDetails.text","descentDetails","titleGrob","element_grob.element_text","element_grob","grobName","ggname","guide_gengrob.legend","FUN","lapply","guides_gengrob","build_guides","ggplot_gtable","print.ggplot","print","grid.Call","heightDetails.text","heightDetails","<Anonymous>","grid.Call","convertUnit","convertWidth","FUN","vapply","height_cm","guide_gengrob.legend","FUN","lapply","guides_gengrob","build_guides","ggplot_gtable","print.ggplot","print","as.list","lapply","sapply","valid.data","structure","valid.unit","unit","pointsGrob","f","g$draw_key","FUN","lapply","FUN","lapply","unlist","guide_gengrob.legend","FUN","lapply","guides_gengrob","build_guides","ggplot_gtable","print.ggplot","print","c","c","do.call","structure","unit.list.from.list","unit.c","do.call","guides_build","build_guides","ggplot_gtable","print.ggplot","print","$","gtable_add_rows","guides_build","build_guides","ggplot_gtable","print.ggplot","print",".deparseOpts","deparse","paste","force","as.data.frame.numeric","as.data.frame","data.frame","gtable_add_grob","ggplot_gtable","print.ggplot","print","stopifnot","gtable_add_cols","ggplot_gtable","print.ggplot","print","grid.Call","widthDetails.text","widthDetails","<Anonymous>","grid.Call.graphics","push.vp.viewport","push.vp","push.vp.vpTree","FUN","lapply","pushViewport","pushgrobvp.viewport","pushgrobvp","pushvpgp","preDraw.gTree","<Anonymous>","grid.Call.graphics","push.vp.viewport","FUN","lapply","pushViewport","pushgrobvp.viewport","pushgrobvp","pushvpgp","preDraw.gTree","preDraw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","grid.Call","widthDetails.text","widthDetails","<Anonymous>","grid.Call.graphics","push.vp.viewport","push.vp","push.vp.vpTree","FUN","lapply","pushViewport","pushgrobvp.viewport","pushgrobvp","pushvpgp","preDraw.gTree","<Anonymous>","grid.Call.graphics","push.vp.viewport","FUN","lapply","pushViewport","pushgrobvp.viewport","pushgrobvp","pushvpgp","preDraw.gTree","preDraw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","grid.Call","heightDetails.text","heightDetails","<Anonymous>","grid.Call.graphics","push.vp.viewport","FUN","lapply","pushViewport","pushgrobvp.viewport","pushgrobvp","pushvpgp","preDraw.gTree","preDraw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","grid.Call.graphics","drawDetails.points","drawDetails","drawGrob","recordGraphics","grid.draw.grob","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","$","rootVP","current.vpPath","upViewport","popgrobvp.viewport","popgrobvp","postDraw.grob","postDraw","drawGrob","recordGraphics","grid.draw.grob","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","grid.Call","widthDetails.text","widthDetails","<Anonymous>","grid.Call.graphics","push.vp.viewport","push.vp","push.vp.vpTree","FUN","lapply","pushViewport","pushgrobvp.viewport","pushgrobvp","pushvpgp","preDraw.gTree","<Anonymous>","grid.Call.graphics","push.vp.viewport","FUN","lapply","pushViewport","pushgrobvp.viewport","pushgrobvp","pushvpgp","preDraw.gTree","preDraw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","NextMethod","grid.draw.absoluteGrob","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","is.factor","split.default","split","drawDetails.polyline","drawDetails","drawGrob","recordGraphics","grid.draw.grob","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","NextMethod","grid.draw.absoluteGrob","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","is.unit","viewport","makeContext.gtable","makeContext","preDraw.gTree","preDraw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","NextMethod","grid.draw.absoluteGrob","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","checkNA","validGP","gpar","is.gpar","valid.viewport","viewport","<Anonymous>","mapply","makeContent.gtable","makeContent","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","NextMethod","grid.draw.absoluteGrob","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","grid.Call","heightDetails.text","heightDetails","<Anonymous>","grid.Call.graphics","push.vp.viewport","push.vp","push.vp.vpTree","FUN","lapply","push.vp.vpStack","FUN","lapply","pushViewport","pushgrobvp.viewport","pushgrobvp","pushvpgp","preDraw.gTree","preDraw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","lapply","sapply","valid.data","structure","valid.unit","unit","is.unit","viewport","<Anonymous>","mapply","makeContent.gtable","makeContent","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","$","pushvpgp","preDraw.grob","preDraw","drawGrob","recordGraphics","grid.draw.grob","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print","grid.Call.graphics","upViewport","popgrobvp.viewport","popgrobvp","postDraw.grob","postDraw","drawGrob","recordGraphics","grid.draw.grob","grid.draw","drawGTree","recordGraphics","grid.draw.gTree","grid.draw","print.ggplot","print"],"filenum":[null,null,1,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1],"linenum":[null,null,19,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19],"memalloc":[40.1282577514648,40.1282577514648,40.1282577514648,40.1749725341797,40.1749725341797,40.1749725341797,40.1749725341797,40.1749725341797,40.1749725341797,40.1749725341797,40.1749725341797,40.1749725341797,40.1749725341797,40.1749725341797,40.3942794799805,40.3942794799805,40.3942794799805,40.3942794799805,40.3942794799805,40.3942794799805,40.3942794799805,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.6552276611328,40.9565124511719,40.9565124511719,40.9565124511719,40.9565124511719,40.9565124511719,40.9565124511719,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.0143966674805,41.08740234375,41.08740234375,41.08740234375,41.08740234375,41.08740234375,41.08740234375,41.08740234375,41.08740234375,41.08740234375,41.08740234375,41.08740234375,41.08740234375,41.08740234375,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.1984024047852,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.2941360473633,41.3826217651367,41.3826217651367,41.3826217651367,41.3826217651367,41.3826217651367,41.3826217651367,41.3826217651367,41.3826217651367,41.3826217651367,41.3826217651367,41.3826217651367,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.4726486206055,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5210342407227,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.5769195556641,41.6880722045898,41.6880722045898,41.6880722045898,41.6880722045898,41.6880722045898,41.6880722045898,41.6880722045898,41.6880722045898,41.6880722045898,41.6880722045898,41.6880722045898,41.6880722045898,41.7707748413086,41.7707748413086,41.7707748413086,41.7707748413086,41.7707748413086,41.7707748413086,41.7707748413086,41.8462066650391,41.8462066650391,41.8462066650391,41.8462066650391,41.8462066650391,41.8462066650391,41.8462066650391,41.8462066650391,41.8462066650391,41.8462066650391,41.8462066650391,41.9788436889648,41.9788436889648,41.9788436889648,41.9788436889648,41.9788436889648,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.0857238769531,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.164909362793,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.2389297485352,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.36572265625,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.3851013183594,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.4879989624023,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.5513305664062,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6093368530273,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.6949234008789,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.7517776489258,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.8521957397461,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9226608276367,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164,42.9628677368164],"meminc":[0,0,0,0.0467147827148438,0,0,0,0,0,0,0,0,0,0,0.219306945800781,0,0,0,0,0,0,0.260948181152344,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.301284790039062,0,0,0,0,0,0.0578842163085938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0730056762695312,0,0,0,0,0,0,0,0,0,0,0,0,0.111000061035156,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.095733642578125,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0884857177734375,0,0,0,0,0,0,0,0,0,0,0.09002685546875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0483856201171875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0558853149414062,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.111152648925781,0,0,0,0,0,0,0,0,0,0,0,0.08270263671875,0,0,0,0,0,0,0.0754318237304688,0,0,0,0,0,0,0,0,0,0,0.132637023925781,0,0,0,0,0.106880187988281,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0791854858398438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0740203857421875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.126792907714844,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.019378662109375,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.102897644042969,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0633316040039062,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0580062866210938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0855865478515625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.056854248046875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.100418090820312,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.070465087890625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0402069091796875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"filename":[null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"  library('profvis')\n  library('ggthemes')\n  library('gam')\n  data(kyphosis)\n  profvis::profvis({\n    sp <- stats::spline(kyphosis$Age, kyphosis$Number, method=\"n\")\n    gm <- gam::gam(Number ~ Age, family=poisson, data=kyphosis)\n\n    df <- data.frame(\n      X = c(sp$x, kyphosis$Age),\n      Y = c(sp$y, predict(gm, kyphosis)),\n      model = c(rep(\"Spline\", length(sp$x)),\n                rep(\"GAM\",    length(kyphosis$Age))))\n\n    g <- ggplot2::ggplot(df) +\n      ggplot2::geom_point(ggplot2::aes(x=X, y=Y, color=model)) +\n      ggthemes::theme_tufte()\n\n    print(g)\n  })","normpath":"<expr>"}],"prof_output":"/var/folders/cx/v45t2v2n6b548_vfn76vnzlw0050sr/T//Rtmp4952Pm/file1706170cf05a3.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script></p>
<p>Often it however suffices to just benchmark two methods against each other.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  f &lt;-<span class="st"> </span>function(n) {
    sum &lt;-<span class="st"> </span><span class="dv">0</span>
    for (i in <span class="kw">seq</span>(n)) sum &lt;-<span class="st"> </span>sum +<span class="st"> </span>i
  }
  g &lt;-<span class="st"> </span>function(.) <span class="kw">sum</span>(.)

  microbenchmark::<span class="kw">microbenchmark</span>(<span class="kw">f</span>(<span class="dv">10000</span>), <span class="kw">g</span>(<span class="dv">10000</span>))</code></pre></div>
<pre><code>## Unit: microseconds
##      expr     min       lq      mean   median       uq      max neval cld
##  f(10000) 269.994 272.1180 333.86152 293.3965 309.6145 3507.778   100   b
##  g(10000)   1.199   1.5745  19.05799   2.2420   2.9720 1622.345   100  a</code></pre>
</div>
<div id="creating-a-landing-page" class="section level2">
<h2><span class="header-section-number">1.10</span> Creating a landing page</h2>
<p>At this point you are finished writing your package and you want to provide it to a large user base. A nice landing page often helps gaining popularity. The easiest way to do so is using <code>pkgdown</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  pkgdown::<span class="kw">build_site</span>(<span class="dt">pkg=</span> <span class="st">&quot;./newpkg&quot;</span>)</code></pre></div>
<p>This creates a web-page like this:</p>
<div align="center">
<p><img src="https://rawgit.com/dirmeier/essential-R/master/fig/pkgdown.jpg" alt="oh no" width="500px"></p>
</div>
<p>A good example can be found <a href="https://dirmeier.github.io/netReg/">here</a>.</p>
</div>
</div>

<footer style="margin-top: 5%">
    <p style="font-size: 0.75em;">&copy; 2017 Simon Dirmeier (<a href="mailto:simon.dirmeier@web.de">simon.dirmeier@web.de</a>)
    </p>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
